# Проект YaMDb

Проект YaMDb собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Список категорий может быть расширен.
Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»).
Добавлять произведения, категории и жанры может только администратор. Не забудьте ознакомиться с postman_collection.

## Пользовательские роли и права доступа
- Аноним — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
- Модератор (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- Суперюзер Django должен всегда обладать правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

## Технологии

- Python 3.10

- Django 5.1.1

- Django REST Framework 3.15.2

- Djoser для аутентификации

- Социальная аутентификация через social-auth-app-django

## Запуск проекта в dev-режиме

1. Клонировать репозиторий и перейти в него в командной строке:

    ```bash
        git clone <https://github.com/destroytxt/api-yamdb>
    ```

2. Cоздать виртуальное окружение:

    windows

    ```bash
        python -m venv venv
    ```

    linux

    ```bash
        python3 -m venv venv
    ```

3. Активируйте виртуальное окружение

    windows

    ```bash
        source venv/Scripts/activate
    ```

    linux

    ```bash
        source venv/bin/activate
    ```

4. Установите зависимости из файла requirements.txt

    ```bash
        pip install -r requirements.txt
    ```

5. Применить миграции в папке с файлом manage.py:

    ```bash
        python manage.py migrate
    ```

6. В папке с файлом manage.py выполните команду:

    windows

    ```bash
        python manage.py runserver
    ```

    linux

    ```bash
        python3 manage.py runserver
    ```

## Наполнение БД

1. Подготовка CSV-файлов:
   - Убедитесь, что в папке `static/data/` есть файлы:
     * `category.csv` - категории
     * `comments.csv` - комментарии
     * `genre_title.csv` -  жанры к произведениям
     * `genre.csv` - жанры  
     * `review.csv` - отзывы
     * `titles.csv` - произведения
     * `users.csv` - пользователи

2. Варианты импорта:
   - **Полный импорт** (все данные):
     ```bash
     python manage.py import_csv_data
     ```
   - **С очисткой БД** (перед импортом):
     ```bash
     python manage.py import_csv_data --clear
     ```
   - **Выборочный импорт** (отдельных моделей):
     ```bash
     python manage.py import_users static/data/users.csv
     python manage.py import_category static/data/category.csv
     python manage.py import_genre static/data/genre.csv
     python manage.py import_titles static/data/titles.csv
     python manage.py import_review static/data/review.csv
     python manage.py import_comments static/data/comments.csv
     ```

3. Проверка данных:
   ```bash
   python manage.py shell

## Документация к проекту

Документация для API после установки доступна по адресу

```url
    http://127.0.0.1/redoc/
```

## Примеры запросов

- GET-Response: <http://127.0.0.1:8000/api/v1/titles/10/>

Request:

```J-SON
{
    "id": 10,
    "name": "Звёздные войны. Эпизод 5: Империя наносит ответный удар",
    "year": 1980,
    "description": null,
    "genre": [
        {
            "name": "Драма",
            "slug": "drama"
        }
    ],
    "category": {
        "name": "Фэнтези",
        "slug": "fantasy"
    },
    "rating": 10
}
```

- GET-Response: <http://127.0.0.1:8000/api/v1/titles/10/reviews/13/>

Request:

```J-SON
{
    "id": 13,
    "author": "faust",
    "title": 10,
    "text": 
        "2 часа смотрятся на одном дыхании.
        Спецэффекты на уровне фильмов Марвела.
        Смотрели всей семьей. Посмотрел несколько отзывов,
        понял , что фильм стоит посмотреть",
    "score": 10,
    "pub_date": "2019-09-24T21:08:21.567Z"
}
```

## Авторы

Студенты курса "Python-разработчик" от Яндекс-Практикума:

[Дорожков Павел](https://github.com/destroytxt)

```text
модели, view и эндпойнты для:
произведений,
категорий,
жанров;
импорт данных из csv файлов,
помощь соавторам)
```

[Поль Жан Зуази ](https://github.com/paul-jz)

```text
система регистрации и аутентификации,
права доступа,
работа с токеном,
система подтверждения через e-mail,
помощь соавторам)
```

[Лыгин Иван](https://github.com/owl-ik)

```text
модели, view и эндпойнты для:
отзывов,
комментариев,
рейтинга произведений,
помощь соавторам)
```
## Благодарности

* **__Создателям проекта Яндекс.Практикум__**
* **__Куратору__**
* **__Наставникам__**
* **__Код ревьюверу__**
* **__Отзывчивым однокурсникам__**